openapi: 3.0.0
info:
  title: Grablink API
  version: '1.0'
  description: |
    # Introduction
    Grab Link REST API is developed to provide standard interface for merchant to accept payment from website or app. As some API may contain sensitive data in request/response message, merchant need to ensure that their environment is complied with PCI DSS security standard requirements before using those API.

    Merchant may also consider to use Links Client Side SDK (Links JS) to reduce the scope of PCI DSS requirement through tokenisation of card data.

    # Idempotency
    Every API request from merchant to Grab Link may contain Idempotency-Key in the header (except for HTTP GET request), and used to identify subsequent retries of the same request, ie. if a request is sent with same Idempotency-Key with same details, eg. amount, payment method, etc, Grab Link will simply return previously completed response without performing any new action. Conversely, API request will return error If duplicate Idempotency-Key is sent with different details to prevent accidental usage.

    Idempotency-Key will be kept for 24 hours, and any request with the same Idempotency-Key beyond that time frame will be considered as a new request.

    # Encryption
    Other than raw PAN, merchant may encrypt the card data before sending through API.

    Grab Link will provides iOS and Android SDK to support merchant app to perform encryption, as well as web SDK to support merchant website.

    Details can be found here: 0. Card number encryption via SDK

    # Webhook
    Merchant is able to set webhook endpoint for supported payment events on Grab Link Merchant Portal, and the result of any API request will be posted to this endpoint. This is especially necessary when the customer is redirected to another website (eg. in the case of 3D Secure Authentication).

    # Signature Hash
    Merchant need to calculate signature hash and include it in header, to ensure data integrity when consuming Grab Link API. Each merchant will be assigned with a secret key, and this key would be used when generating HMAC signature.

    ### Step to generate HMAC signature:
    1. Generate timestamp (unix timestamp)
    2. Concatenate request-body with timestamp in the following format:
    concatenated-string = {request-body} + ",t={timestamp}"
    3. Calculate HMAC using SHA512 hashing
    signature-hash = hmac-sha512(concatenated-string, {secret-key})
    4. Set the hex string representation of the HMAC result to upper case, and use it as the signature hash in base64 encoding format.
    5. Include Timestamp to header
    6. Include Signature to header

    ### Sample:
    ### Example of message to be signed
    ```json
    {"merchant_order_num":"LESTERCHAN-001","capture_after_hours":"0","route_indicator":"LinksMerchant","require_3ds":true,"payer":{"reference_id":"k11ir27iftfjescf4bhc18qpbdsv2dl7","name":"Lester Chan","email":"lester.chan@grab.com","phone":"+6598765432","billing_address":{"city":"Singapore","country":"Singapore","state":"Singapore","building_name":"Grab HQ","street":"Media Link","postal_code":"139305"},"shipping_address":{"city":"SG","country":"Singapore","state":"SG","building_name":"Marina One","street":"9 Straits View","postal_code":"018937"}},"statement_descriptor":"LINKS","cart":{"cart_total":"16.00","cart_tax":"3.00","cart_shipping_fee":"2.00","cart_items":[{"item_name":"lesterchan.net Square Sticker","item_quantity":1,"item_price":"6.00","item_image":"https://lesterchan.net/content/themes/lesterchan.net/img/avatars/100.jpg","item_option":"Transparent"},{"item_name":"lesterchan.net Rectangle Sticker","item_quantity":2,"item_price":"2.00","item_image":"https://lesterchan.net/content/themes/lesterchan/img/logos/logo-800x600.png","item_option":"Large"}],"cart_currency":"SGD","cart_discount":"0.00"},"hpp":{"return_url":"https://lesterchan.net/shop/success","cancel_url":"https://lesterchan.net/shop/cancellester.chan@grab.com","phone":"+6598765432","billing_address":{"city":"Singapore","country":"Singapore","state":"Singapore","building_name":"Grab HQ","street":"Media Link","postal_code":"139305"},"shipping_address":{"city":"SG","country":"Singapore","state":"SG","building_name":"Marina One","street":"9 Straits View","postal_code":"018937"}},"statement_descriptor":"LINKS","cart":{"cart_total":"16.00","cart_tax":"3.00","cart_shipping_fee":"2.00","cart_items":[{"item_name":"lesterchan.net Square Sticker","item_quantity":1,"item_price":"6.00","item_image":"https://lesterchan.net/content/themes/lesterchan.net/img/avatars/100.jpg","item_option":"Transparent"},{"item_name":"lesterchan.net Rectangle Sticker","item_quantity":2,"item_price":"2.00","item_image":"https://lesterchan.net/content/themes/lesterchan/img/logos/logo-800x600.png","item_option":"Large"}],"cart_currency":"SGD","cart_discount":"0.00"},"hpp":{"return_url":"https://lesterchan.net/shop/success","cancel_url":"https://lesterchan.net/shop/cancel","browser_info":{"ip":"127.0.0.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.85 Safari/537.36"}}}
    ```

    ### Signature Calculation
    ```sh
    $body = ... // 'refer to the sample message above'
    $hash_secret = get_hash_secret() // 'example: 007d252f0d0e47f9965589b7f7d011ba'
    $timestamp = get_timestamp() // 'example: 1620978893'
    $concatenated_string = $body + ",t=" + $timestamp
    $signature = hmac_sha512($concatenated_string, $hash_secret) // '10ecc1da78c0bed907b2c42f518c482bbe501c758955858adcb4c353ac1675ccc0bd32a84bae3db62757bb46e676a8ca25c3b0104ff086325f7e8a5d8e52a0ed'
    $signature = upper_case($signature) // '10ECC1DA78C0BED907B2C42F518C482BBE501C758955858ADCB4C353AC1675CCC0BD32A84BAE3DB62757BB46E676A8CA25C3B0104FF086325F7E8A5D8E52A0ED'
    $signature = base64_encode($signature) // 'MTBFQ0MxREE3OEMwQkVEOTA3QjJDNDJGNTE4QzQ4MkJCRTUwMUM3NTg5NTU4NThBRENCNEMzNTNBQzE2NzVDQ0MwQkQzMkE4NEJBRTNEQjYyNzU3QkI0NkU2NzZBOENBMjVDM0IwMTA0RkYwODYzMjVGN0U4QTVEOEU1MkEwRUQ=''
    ```
  contact:
    email: grablink.engineering@grab.com
    name: GrabLink Engineering
  x-logo:
    url: 'https://www.grab.com/sg/wp-content/uploads/sites/4/2017/06/New-Masthead_900x450.png'
    altText: Grab logo
servers:
  - url: 'https://links-checkout.stg-myteksi.com/api'
    description: Staging
paths:
  /v1/transaction:
    post:
      summary: Create Transaction
      operationId: post-transaction
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  trans_id:
                    type: string
                  action_id:
                    type: string
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  merchant_order_num:
                    type: string
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  terminal_data:
                    type: object
                    properties:
                      terminal_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
                  auth_code:
                    type: string
                  cvc_result:
                    type: string
                  avs_result:
                    type: string
                  acquirer_reference:
                    type: string
                  three_ds:
                    type: object
                    properties:
                      redirection_url:
                        type: string
                      sdk_auth_response:
                        type: string
                  payer:
                    type: object
                    properties:
                      reference_id:
                        type: string
                  payment_method:
                    type: object
                    properties:
                      card:
                        type: object
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          variant:
                            type: string
                          issuing_country:
                            type: string
                          issuing_bank:
                            type: string
                      token:
                        type: object
                        properties:
                          token_id:
                            type: string
                      card_present:
                        type: object
                        description: Mandatory for Card Present transaction
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          icc_data:
                            type: string
                            description: ''
                      fingerprint:
                        type: string
                  status:
                    type: string
                    description: ''
                    enum:
                      - pending
                      - action required
                      - failed
                      - success
                  metadata:
                    type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  description: 'Unique transaction id assigned by merchant for each request. '
                  maxLength: 64
                merchant_order_num:
                  type: string
                  description: The value of this parameter can be used to refer a transaction to the particular order record in merchant's system.
                  maxLength: 64
                amount:
                  type: object
                  description: Transaction Amount to be authorised.
                  required:
                    - currency
                    - value
                  properties:
                    currency:
                      type: string
                      minLength: 3
                      maxLength: 3
                      example: SGD
                    value:
                      type: string
                      maxLength: 16
                capture_method:
                  type: string
                  description: |-
                    Default is manual.

                    manual: Authorise will only be captured in capture endpoint 

                    immediate: Transaction will be captured immediately. 
                  enum:
                    - immediate
                    - manual
                  maxLength: 16
                  default: manual
                route_indicator:
                  type: string
                  description: Used to define routing algorithm to be used in a transaction
                  maxLength: 16
                interaction_mode:
                  type: string
                  description: |-
                    Default is manual

                    card_on_file: Credential on File is cardholder initiated transaction where they authorised a merchant to store their payment details.

                    manual: PAN Manual Entry

                    recurring: Recurring transaction, same as card_on_file but it is initiated by merchant.
                  enum:
                    - card_on_file
                    - manual
                    - recurring
                  maxLength: 16
                require_3ds:
                  type: boolean
                  description: 'This parameter indicates if you want to perform 3DS for a transaction or not. Allowed values: true or false. Default value is false.'
                three_ds:
                  type: object
                  description: Mandatory when require_3ds parameter is set.
                  properties:
                    return_url:
                      type: string
                      maxLength: 256
                      format: uri
                    browser_info:
                      type: object
                      properties:
                        accept_header:
                          type: string
                          maxLength: 128
                        user_agent:
                          type: string
                          maxLength: 128
                        language:
                          type: string
                          maxLength: 32
                        color_depth:
                          type: integer
                        screen_height:
                          type: integer
                        screen_width:
                          type: integer
                        java_enabled:
                          type: boolean
                        javascript_enabled:
                          type: boolean
                        timezone_offset:
                          type: string
                          maxLength: 5
                    account_info:
                      type: object
                      description: The account information is used to improve the chance for Frictionless 3DS2 Authentication.
                      properties:
                        account_age_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                          maxLength: 2
                        account_change_date:
                          type: string
                          maxLength: 8
                          minLength: 8
                          format: date
                        account_change_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                          maxLength: 2
                        account_date:
                          type: string
                          maxLength: 8
                          minLength: 8
                          format: date
                        account_password_change_date:
                          type: string
                          minLength: 8
                          maxLength: 8
                          format: date
                        account_password_change_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                          maxLength: 2
                        account_purchase_count:
                          type: number
                        account_provisioning_attempts:
                          type: number
                        account_day_transactions:
                          type: number
                        account_year_transactions:
                          type: number
                        payment_account_age:
                          type: string
                          maxLength: 8
                          minLength: 8
                          format: date
                        payment_account_age_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                          maxLength: 2
                        ship_address_usage_date:
                          type: string
                          format: date
                          minLength: 8
                          maxLength: 8
                        ship_address_usage_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                          maxLength: 2
                        ship_name_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                          maxLength: 2
                        suspicious_account_activity:
                          type: boolean
                    sdk_auth_request:
                      type: string
                      description: |-
                        Mandatory for Native App Based 3DS2 Authentication.

                        Packed form of all other properties from 3DS2 SDK. The value consists of App ID, SDK Trans ID, Encrypted Device Data, Ephemeral Public Key, SDK Ref Number, SDK Max Timeout, Message Version, Interface and UI Type Options,

                        Can be obtained from 3DS2 SDK.
                      maxLength: 65000
                three_ds_data:
                  type: object
                  description: Merchant may perform 3DS authentication using third party MPI/3DS Server and include the result here.
                  properties:
                    xid:
                      type: string
                      description: To be used for 3D Secure v1 only
                      maxLength: 64
                    ds_trans_id:
                      type: string
                      description: To be used for 3D Secure v2 only
                      maxLength: 64
                    status:
                      type: string
                      enum:
                        - 'Y'
                        - 'N'
                        - A
                        - U
                      maxLength: 1
                    eci:
                      type: string
                      maxLength: 3
                    auth_value:
                      type: string
                      maxLength: 32
                    auth_algo:
                      type: string
                      maxLength: 32
                    version:
                      type: string
                      maxLength: 16
                payer:
                  type: object
                  required:
                    - reference_id
                  properties:
                    reference_id:
                      type: string
                      description: Unique customer identifier.
                      maxLength: 50
                    name:
                      type: string
                      maxLength: 250
                    email:
                      type: string
                      maxLength: 250
                    phone:
                      type: string
                      maxLength: 20
                    billing_address:
                      type: object
                      properties:
                        city:
                          type: string
                          maxLength: 100
                        country:
                          type: string
                          maxLength: 2
                        state:
                          type: string
                          maxLength: 100
                        building_name:
                          type: string
                          maxLength: 100
                        street:
                          type: string
                          maxLength: 100
                        postal_code:
                          type: string
                          maxLength: 10
                    shipping_address:
                      type: object
                      properties:
                        city:
                          type: string
                          maxLength: 100
                        country:
                          type: string
                          maxLength: 2
                        state:
                          type: string
                          maxLength: 100
                        building_name:
                          type: string
                          maxLength: 100
                        street:
                          type: string
                          maxLength: 100
                        postal_code:
                          type: string
                          maxLength: 10
                terminal_data:
                  type: object
                  properties:
                    terminal_id:
                      type: string
                      maxLength: 64
                    pos_entry_mode:
                      type: object
                      properties:
                        pan_entry:
                          type: string
                          enum:
                            - unknown
                            - manual
                            - magstripe
                            - chip
                            - contactless_chip
                            - contactless_magstripe
                            - fallback_magstripe
                          maxLength: 32
                        pin_entry:
                          type: string
                          enum:
                            - unknown
                            - enabled
                            - disabled
                            - error
                          maxLength: 16
                    pos_condition_code:
                      type: string
                      enum:
                        - attended
                        - unattended
                        - mail_order
                      maxLength: 16
                device_info:
                  type: object
                  properties:
                    app_version:
                      type: string
                      maxLength: 16
                    platform:
                      type: string
                      maxLength: 16
                    spec:
                      type: string
                      maxLength: 32
                    ip:
                      type: string
                      maxLength: 32
                    geo_location:
                      type: object
                      properties:
                        latitude:
                          type: string
                          maxLength: 16
                        longitude:
                          type: string
                          maxLength: 16
                payment_method:
                  type: object
                  properties:
                    card:
                      type: object
                      properties:
                        number:
                          type: string
                          maxLength: 768
                        expiry_month:
                          type: string
                          maxLength: 768
                        expiry_year:
                          type: string
                          maxLength: 768
                        cvc:
                          type: string
                          maxLength: 768
                        holder_name:
                          type: string
                          maxLength: 768
                        create_token:
                          type: boolean
                          default: false
                    token:
                      type: object
                      properties:
                        token_id:
                          type: string
                          maxLength: 40
                    card_present:
                      type: object
                      description: Mandatory for Card Present transaction
                      properties:
                        number:
                          type: string
                          maxLength: 768
                        expiry_month:
                          type: string
                          maxLength: 768
                        expiry_year:
                          type: string
                          maxLength: 768
                        cvc:
                          type: string
                          maxLength: 768
                        sequence_num:
                          type: string
                          maxLength: 768
                        icc_data:
                          type: string
                          description: Mandatory for chip and contactless transaction.
                          maxLength: 256
                        track2_data:
                          type: string
                          maxLength: 256
                statement_descriptor:
                  type: string
                  maxLength: 128
                sub_merchant:
                  type: object
                  properties:
                    id:
                      type: string
                      maxLength: 15
                    name:
                      type: string
                      maxLength: 32
                    city:
                      type: string
                      maxLength: 100
                    country:
                      type: string
                      maxLength: 2
                    state:
                      type: string
                      maxLength: 100
                    street:
                      type: string
                      maxLength: 48
                    postal_code:
                      type: string
                      maxLength: 10
                    mcc:
                      type: string
                      maxLength: 4
                metadata:
                  type: string
              required:
                - merchant_action_id
                - amount
                - payer
                - payment_method
            examples: {}
        description: Create Transaction
      callbacks:
        taskModification:
          'https://{webhook_endpoint}':
            post:
              description: An event triggered every time a Task is created,
                updated or deleted.
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/TaskModificationEvent'
              responses:
                '200':
                  description: OK
        personModification:
          'https://{webhook_endpoint}':
            post:
              description: An event triggered every time a Person is created,
                updated or deleted.
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/PersonModificationEvent'
              responses:
                '200':
                  description: OK
      description: Create Transaction
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Transaction
      security: []
      x-internal: false
    parameters: []
  '/v1/transaction/{trans_id}':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    get:
      summary: Retrieve Transaction
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  trans_id:
                    type: string
                  merchant_order_num:
                    type: string
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  terminal_data:
                    type: object
                    properties:
                      terminal_id:
                        type: string
                  auth_code:
                    type: string
                  cvc_result:
                    type: string
                  avs_result:
                    type: string
                  acquirer_reference:
                    type: string
                  payer:
                    type: object
                    properties:
                      reference_id:
                        type: string
                    required:
                      - reference_id
                  payment_method:
                    type: object
                    properties:
                      card:
                        type: object
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          variant:
                            type: string
                          issuing_country:
                            type: string
                          issuing_bank:
                            type: string
                      token:
                        type: object
                        properties:
                          token_id:
                            type: string
                      card_present:
                        type: object
                        description: Mandatory for Card Present transaction
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          icc_data:
                            type: string
                            description: ''
                      fingerprint:
                        type: string
                  status:
                    type: string
                    enum:
                      - pending
                      - action required
                      - failed
                      - authorised
                      - cancelling
                      - cancelled
                      - capturing
                      - captured
                      - refunding
                      - refunded
                      - partial refunded
                  metadata:
                    type: string
                  trans_logs:
                    type: array
                    items:
                      type: object
                      properties:
                        action_id:
                          type: string
                        action_type:
                          type: string
                          description: ''
                        status:
                          type: string
                          enum:
                            - pending
                            - action required
                            - failed
                            - success
                        action_time:
                          type: string
                        merchant_action_id:
                          type: string
                        initiating_reason:
                          type: string
                        amount:
                          type: object
                          properties:
                            currency:
                              type: string
                            value:
                              type: string
                        result:
                          type: object
                          properties:
                            code:
                              type: string
                            message:
                              type: string
                            raw_message:
                              type: string
                        three_ds:
                          type: object
                          properties:
                            redirection_url:
                              type: string
                            sdk_auth_response:
                              type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      operationId: get-transaction-id
      parameters:
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            format: uuid
          in: header
          name: X-Request-ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      description: Retrieve Transaction
      tags:
        - Transaction
      security: []
  '/v1/transaction/{trans_id}/capture':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    post:
      summary: Capture
      operationId: post-transaction-trans_id-capture
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                    description: |-
                      ISO-8601 standard date-time format (e.g. "2019-09-26T07:58:30.996+0200")

                      Datetime of this transaction happen
                  action_id:
                    type: string
                  merchant_action_id:
                    type: string
                  status:
                    type: string
                    enum:
                      - pending
                      - action required
                      - failed
                      - success
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  terminal_data:
                    type: object
                    properties:
                      terminal_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      description: Capture
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Capture
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  maxLength: 64
                amount:
                  type: object
                  required:
                    - currency
                    - value
                  properties:
                    currency:
                      type: string
                      minLength: 3
                      maxLength: 3
                      example: SGD
                    value:
                      type: string
                      maxLength: 16
                terminal_data:
                  type: object
                  properties:
                    terminal_id:
                      type: string
                      maxLength: 64
              required:
                - merchant_action_id
                - amount
            examples: {}
        description: Capture
      security: []
  '/v1/transaction/{trans_id}/refund':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    post:
      summary: Refund
      operationId: post-transaction-trans_id-refund
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                    description: |-
                      ISO-8601 standard date-time format (e.g. "2019-09-26T07:58:30.996+0200")

                      Datetime of this transaction happen
                  action_id:
                    type: string
                  merchant_action_id:
                    type: string
                  status:
                    type: string
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  terminal_data:
                    type: object
                    properties:
                      terminal_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                        enum:
                          - pending
                          - action required
                          - failed
                          - success
                      message:
                        type: string
                      raw_message:
                        type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      description: Refund
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Refund
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  maxLength: 64
                initiating_reason:
                  type: string
                  maxLength: 128
                amount:
                  type: object
                  required:
                    - currency
                    - value
                  properties:
                    currency:
                      type: string
                      minLength: 3
                      maxLength: 3
                      example: SGD
                    value:
                      type: string
                      maxLength: 16
                terminal_data:
                  type: object
                  properties:
                    terminal_id:
                      type: string
                      maxLength: 64
              required:
                - merchant_action_id
                - initiating_reason
                - amount
            examples: {}
        description: Refund
      security: []
  '/v1/transaction/{trans_id}/cancel':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    post:
      summary: Cancel
      operationId: post-transaction-trans_id-cancel
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                  action_id:
                    type: string
                  merchant_action_id:
                    type: string
                  status:
                    type: string
                    enum:
                      - pending
                      - action required
                      - failed
                      - success
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  terminal_data:
                    type: object
                    properties:
                      terminal_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      description: Cancel
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Cancel
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  maxLength: 64
                initiating_reason:
                  type: string
                  maxLength: 128
                terminal_data:
                  type: object
                  properties:
                    terminal_id:
                      type: string
                      maxLength: 64
              required:
                - merchant_action_id
                - initiating_reason
            examples: {}
        description: Cancel
      security: []
  '/v1/transaction/{trans_id}/tc':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
    post:
      summary: TC Upload
      operationId: post-v1-transaction-trans_id-tc
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                    description: |-
                      ISO-8601 standard date-time format (e.g. "2019-09-26T07:58:30.996+0200")

                      Datetime of this transaction happen
                  action_id:
                    type: string
                  merchant_action_id:
                    type: string
                  status:
                    type: string
                    enum:
                      - pending
                      - action required
                      - failed
                      - success
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  terminal_data:
                    type: object
                    properties:
                      terminal_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      description: TC Upload
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  maxLength: 64
                amount:
                  type: object
                  required:
                    - currency
                    - value
                  properties:
                    currency:
                      type: string
                      minLength: 3
                      maxLength: 3
                      example: SGD
                    value:
                      type: string
                      maxLength: 16
                terminal_data:
                  type: object
                  properties:
                    terminal_id:
                      type: string
                      maxLength: 64
                    pos_entry_mode:
                      type: object
                      properties:
                        pan_entry:
                          type: string
                          enum:
                            - unknown
                            - manual
                            - magstripe
                            - chip
                            - contactless_chip
                            - contactless_magstripe
                            - fallback_magstripe
                          maxLength: 32
                        pin_entry:
                          type: string
                          enum:
                            - unknown
                            - enabled
                            - disabled
                            - error
                          maxLength: 16
                    pos_condition_code:
                      type: string
                      enum:
                        - attended
                        - unattended
                        - mail_order
                      maxLength: 16
                payment_method:
                  type: object
                  properties:
                    card_present:
                      type: object
                      description: Mandatory for Card Present transaction
                      properties:
                        number:
                          type: string
                          maxLength: 768
                        expiry_month:
                          type: string
                          maxLength: 768
                        expiry_year:
                          type: string
                          maxLength: 768
                        cvc:
                          type: string
                          maxLength: 768
                        sequence_num:
                          type: string
                          maxLength: 768
                        icc_data:
                          type: string
                          description: Mandatory for chip and contactless transaction.
                          maxLength: 256
                        track2_data:
                          type: string
                          maxLength: 256
              required:
                - merchant_action_id
                - amount
            examples: {}
        description: TC Upload
      security: []
      tags:
        - Transaction Certificate
  /v1/payment_method:
    post:
      summary: Add Payment Method
      operationId: post-payment-method
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
                  three_ds:
                    type: object
                    properties:
                      redirection_url:
                        type: string
                      sdk_auth_response:
                        type: string
                  payer:
                    type: object
                    properties:
                      reference_id:
                        type: string
                  payment_method:
                    type: object
                    properties:
                      card:
                        type: object
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          variant:
                            type: string
                          issuing_country:
                            type: string
                          issuing_bank:
                            type: string
                      token:
                        type: object
                        properties:
                          token_id:
                            type: string
                      fingerprint:
                        type: string
                  status:
                    type: string
                    description: ''
                    enum:
                      - pending
                      - action required
                      - failed
                      - success
                  metadata:
                    type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  description: 'Unique transaction id assigned by merchant for each request. '
                  maxLength: 64
                route_indicator:
                  type: string
                  description: Used to define routing algorithm to be used in a transaction
                  maxLength: 16
                require_3ds:
                  type: boolean
                  description: 'This parameter indicates if you want to perform 3DS for a transaction or not. Allowed values: true or false. Default value is false.'
                three_ds:
                  type: object
                  description: Mandatory when require_3ds parameter is set.
                  properties:
                    return_url:
                      type: string
                      maxLength: 256
                      format: uri
                    browser_info:
                      type: object
                      properties:
                        accept_header:
                          type: string
                          maxLength: 128
                        user_agent:
                          type: string
                          maxLength: 128
                        language:
                          type: string
                          maxLength: 32
                        color_depth:
                          type: integer
                        screen_height:
                          type: integer
                        screen_width:
                          type: integer
                        java_enabled:
                          type: boolean
                        javascript_enabled:
                          type: boolean
                        timezone_offset:
                          type: string
                          maxLength: 5
                    account_info:
                      type: object
                      description: The account information is used to improve the chance for Frictionless 3DS2 Authentication.
                      properties:
                        account_age_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                          maxLength: 2
                        account_change_date:
                          type: string
                          maxLength: 8
                          minLength: 8
                          format: date
                        account_change_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                          maxLength: 2
                        account_date:
                          type: string
                          maxLength: 8
                          minLength: 8
                          format: date
                        account_password_change_date:
                          type: string
                          minLength: 8
                          maxLength: 8
                          format: date
                        account_password_change_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                          maxLength: 2
                        account_purchase_count:
                          type: number
                        account_provisioning_attempts:
                          type: number
                        account_day_transactions:
                          type: number
                        account_year_transactions:
                          type: number
                        payment_account_age:
                          type: string
                          maxLength: 8
                          minLength: 8
                          format: date
                        payment_account_age_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                          maxLength: 2
                        ship_address_usage_date:
                          type: string
                          format: date
                          minLength: 8
                          maxLength: 8
                        ship_address_usage_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                          maxLength: 2
                        ship_name_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                          maxLength: 2
                        suspicious_account_activity:
                          type: boolean
                    sdk_auth_request:
                      type: string
                      description: |-
                        Mandatory for Native App Based 3DS2 Authentication.

                        Packed form of all other properties from 3DS2 SDK. The value consists of App ID, SDK Trans ID, Encrypted Device Data, Ephemeral Public Key, SDK Ref Number, SDK Max Timeout, Message Version, Interface and UI Type Options,

                        Can be obtained from 3DS2 SDK.
                      maxLength: 65000
                three_ds_data:
                  type: object
                  description: Merchant may perform 3DS authentication using third party MPI/3DS Server and include the result here.
                  properties:
                    xid:
                      type: string
                      description: To be used for 3D Secure v1 only
                      maxLength: 64
                    ds_trans_id:
                      type: string
                      description: To be used for 3D Secure v2 only
                      maxLength: 64
                    status:
                      type: string
                      enum:
                        - 'Y'
                        - 'N'
                        - A
                        - U
                      maxLength: 1
                    eci:
                      type: string
                      maxLength: 3
                    auth_value:
                      type: string
                      maxLength: 32
                    auth_algo:
                      type: string
                      maxLength: 32
                    version:
                      type: string
                      maxLength: 16
                payer:
                  type: object
                  required:
                    - reference_id
                  properties:
                    reference_id:
                      type: string
                      description: Unique customer identifier.
                      maxLength: 50
                    name:
                      type: string
                      maxLength: 250
                    email:
                      type: string
                      maxLength: 250
                    phone:
                      type: string
                      maxLength: 20
                    billing_address:
                      type: object
                      properties:
                        city:
                          type: string
                          maxLength: 100
                        country:
                          type: string
                          maxLength: 2
                        state:
                          type: string
                          maxLength: 100
                        building_name:
                          type: string
                          maxLength: 100
                        street:
                          type: string
                          maxLength: 100
                        postal_code:
                          type: string
                          maxLength: 10
                    shipping_address:
                      type: object
                      properties:
                        city:
                          type: string
                          maxLength: 100
                        country:
                          type: string
                          maxLength: 2
                        state:
                          type: string
                          maxLength: 100
                        building_name:
                          type: string
                          maxLength: 100
                        street:
                          type: string
                          maxLength: 100
                        postal_code:
                          type: string
                          maxLength: 10
                device_info:
                  type: object
                  properties:
                    app_version:
                      type: string
                      maxLength: 16
                    platform:
                      type: string
                      maxLength: 16
                    spec:
                      type: string
                      maxLength: 32
                    ip:
                      type: string
                      maxLength: 32
                    geo_location:
                      type: object
                      properties:
                        latitude:
                          type: string
                          maxLength: 16
                        longitude:
                          type: string
                          maxLength: 16
                payment_method:
                  type: object
                  properties:
                    card:
                      type: object
                      properties:
                        number:
                          type: string
                          maxLength: 768
                        expiry_month:
                          type: string
                          maxLength: 768
                        expiry_year:
                          type: string
                          maxLength: 768
                        cvc:
                          type: string
                          maxLength: 768
                        holder_name:
                          type: string
                          maxLength: 768
                        create_token:
                          type: boolean
                          default: false
                metadata:
                  type: string
              required:
                - merchant_action_id
                - payer
                - payment_method
        description: Add Payment Method
      description: Add Payment Method
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Payment Method
      security:
        - API Key: []
    parameters: []
  '/v1/payment_method/{token_id}':
    parameters:
      - schema:
          type: string
        name: token_id
        in: path
        required: true
        description: Token ID
    get:
      summary: Retrieve Payment Method
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
                  payer:
                    type: object
                    properties:
                      reference_id:
                        type: string
                  payment_method:
                    type: object
                    properties:
                      card:
                        type: object
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          variant:
                            type: string
                          issuing_country:
                            type: string
                          issuing_bank:
                            type: string
                      token:
                        type: object
                        properties:
                          token_id:
                            type: string
                      fingerprint:
                        type: string
                  metadata:
                    type: string
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      operationId: get-payment-method-id
      parameters:
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            format: uuid
          in: header
          name: X-Request-ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      description: Retrieve Payment Method
      tags:
        - Payment Method
      security:
        - API Key: []
    delete:
      summary: Delete Payment Method
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
                  payer:
                    type: object
                    properties:
                      reference_id:
                        type: string
                  payment_method:
                    type: object
                    properties:
                      card:
                        type: object
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          variant:
                            type: string
                          issuing_country:
                            type: string
                          issuing_bank:
                            type: string
                      token:
                        type: object
                        properties:
                          token_id:
                            type: string
                      fingerprint:
                        type: string
                  metadata:
                    type: string
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      operationId: delete-payment-method-id
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      description: Delete Payment Method
      tags:
        - Payment Method
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  maxLength: 64
              required:
                - merchant_action_id
            examples: {}
        description: Delete Payment Method
      security:
        - API Key: []
  /v1/order:
    post:
      summary: Create Order (Hosted Payment Page)
      operationId: post-order
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  order_id:
                    type: string
                  merchant_order_num:
                    type: string
                  order_status:
                    type: string
                  payer:
                    type: object
                    properties:
                      reference_id:
                        type: string
                  cart:
                    type: object
                    properties:
                      cart_currency:
                        type: string
                      cart_total:
                        type: string
                  hpp:
                    type: object
                    properties:
                      redirect_url:
                        type: string
                  metadata:
                    type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_order_num:
                  type: string
                  description: The value of this parameter can be used to refer a transaction to the particular order record in merchant's system.
                  maxLength: 50
                route_indicator:
                  type: string
                  description: Used to define routing algorithm to be used in a transaction
                  maxLength: 20
                require_3ds:
                  type: boolean
                  description: 'This parameter indicates if you want to perform 3DS for a transaction or not. Allowed values: true or false. Default value is false.'
                payer:
                  type: object
                  properties:
                    reference_id:
                      type: string
                      description: Unique customer identifier.
                      maxLength: 50
                    name:
                      type: string
                      maxLength: 250
                    email:
                      type: string
                      maxLength: 250
                    phone:
                      type: string
                      maxLength: 20
                    billing_address:
                      type: object
                      properties:
                        city:
                          type: string
                          maxLength: 100
                        country:
                          type: string
                          maxLength: 2
                        state:
                          type: string
                          maxLength: 100
                        building_name:
                          type: string
                          maxLength: 100
                        street:
                          type: string
                          maxLength: 100
                        postal_code:
                          type: string
                          maxLength: 10
                    shipping_address:
                      type: object
                      properties:
                        city:
                          type: string
                          maxLength: 100
                        country:
                          type: string
                          maxLength: 2
                        state:
                          type: string
                          maxLength: 100
                        building_name:
                          type: string
                          maxLength: 100
                        street:
                          type: string
                          maxLength: 100
                        postal_code:
                          type: string
                          maxLength: 10
                  required:
                    - reference_id
                statement_descriptor:
                  type: string
                  maxLength: 25
                cart:
                  type: object
                  required:
                    - cart_currency
                    - cart_total
                  properties:
                    cart_currency:
                      type: string
                      minLength: 3
                      maxLength: 3
                      example: SGD
                      description: Currency of the shopping cart
                    cart_total:
                      type: string
                      description: 'Total order amount, must be greater than 0.00'
                      maxLength: 20
                    cart_subtotal:
                      type: string
                      maxLength: 20
                    cart_discount:
                      type: string
                      maxLength: 20
                    cart_tax:
                      type: string
                      maxLength: 20
                    cart_shipping_fee:
                      type: string
                      maxLength: 20
                    cart_admin_fee:
                      type: string
                      maxLength: 20
                    cart_items:
                      type: array
                      maxItems: 50
                      items:
                        type: object
                        properties:
                          item_name:
                            type: string
                            maxLength: 200
                          item_quantity:
                            type: integer
                          item_price:
                            type: string
                            maxLength: 20
                          item_image:
                            type: string
                            maxLength: 2000
                            format: uri
                          item_option:
                            type: string
                            maxLength: 200
                hpp:
                  type: object
                  required:
                    - return_url
                    - cancel_url
                  properties:
                    return_url:
                      type: string
                      maxLength: 2000
                      format: uri
                    cancel_url:
                      type: string
                      maxLength: 2000
                      format: uri
                    browser_info:
                      type: object
                      properties:
                        user_agent:
                          type: string
                          maxLength: 200
                        ip:
                          type: string
                          maxLength: 39
                          format: ipv4
                metadata:
                  type: string
                  description: |-
                    Fields: 20
                    Key Length: 200
                    Value Length: 200
              required:
                - cart
                - hpp
            examples: {}
        description: Create Order
      description: |-
        Create Order API creates Hosted Payment Page Session and returns Redirect URL in the response. 

        Once consumer redirected to the provded URL and complete the payment, the transaction result callback will be triggered through webhook to designated merchant's endpoint, consumer will be redirected back to Return URL. 
      parameters:
        - schema:
            type: string
            description: application/json
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Order
      security:
        - API Key: []
    parameters: []
  '/v1/order/{order_id}':
    parameters:
      - schema:
          type: string
        name: order_id
        in: path
        required: true
    get:
      summary: Retrieve Order
      tags:
        - Order
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  order:
                    type: object
                    properties:
                      order_id:
                        type: string
                      merchant_order_num:
                        type: string
                      order_time:
                        type: string
                      order_status:
                        type: string
                      payer:
                        type: object
                        properties:
                          reference_id:
                            type: string
                      cart:
                        type: object
                        properties:
                          cart_total:
                            type: object
                            properties:
                              currency:
                                type: string
                              value:
                                type: string
                      metadata:
                        type: string
                  transaction:
                    type: object
                    properties:
                      trans_id:
                        type: string
                      action_time:
                        type: string
                      merchant_action_id:
                        type: string
                      trans_amount:
                        type: object
                        properties:
                          currency:
                            type: string
                          value:
                            type: string
                      result:
                        type: object
                        properties:
                          code:
                            type: string
                          message:
                            type: string
                          raw_message:
                            type: string
                      auth_code:
                        type: string
                      cvc_result:
                        type: string
                      avs_result:
                        type: string
                      acquirer_reference:
                        type: string
                      payer:
                        type: object
                        properties:
                          reference_id:
                            type: string
                        required:
                          - reference_id
                      payment_method:
                        type: object
                        properties:
                          card:
                            type: object
                            properties:
                              brand:
                                type: string
                              first_6:
                                type: string
                              last_4:
                                type: string
                              funding_type:
                                type: string
                              category:
                                type: string
                              issuing_country:
                                type: string
                              issuing_bank:
                                type: string
                          token:
                            type: object
                            properties:
                              token_id:
                                type: string
                          fingerprint:
                            type: string
                      trans_status:
                        type: string
              examples: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  target:
                    type: string
                  reason:
                    type: string
                  message:
                    type: string
      operationId: get-order-order_id
      description: Retrieve Order
      security:
        - API Key: []
      parameters:
        - schema:
            type: string
            description: HMAC-SHA512
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            format: uuid
          in: header
          name: X-Request-ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
components:
  schemas:
    Task:
      description: Object representing a Task
      required:
      - description
      type: object
      properties:
        id:
          description: id of the taks
          type: string
          readOnly: true
          example: e1cb23d0-6cbe-4a29-b586-bfa424bc93fd
        description:
          description: description of the task
          type: string
          example: My important task
        author:
          $ref: "#/components/schemas/Person"
        assignee:
          $ref: "#/components/schemas/Person"
        completed:
          description: indicates if a taks is completed or not
          type: boolean
    Person:
      description: Object representing a Person
      type: object
      properties:
        id:
          description: id of the taks
          type: string
          readOnly: true
          example: 55f1b942-207f-4634-9b85-97847b8c6e82
        firstName:
          description: first name of the person
          type: string
          example: John
        lastName:
          description: last name of the person
          type: string
          example: Doe
    TaskModificationEvent:
      type: object
      description: A callback event triggered every time a Task is created,
                updated or deleted.
      properties:
        timestamp:
          type: integer
          format: int64
          description: The time (unix time in millies) when the event was generated.
        eventType:
          type: string
          description: The name of the event
        action:
          $ref: '#/components/schemas/EntityModificationAction'
        entity:
          $ref: '#/components/schemas/Task'
    PersonModificationEvent:
      type: object
      description: An callback event triggered every time a Person is created,
                updated or deleted.
      properties:
        timestamp:
          type: integer
          format: int64
          description: The time (unix time in millies) when the event was generated.
        eventType:
          type: string
          description: The name of the event
        action:
          $ref: '#/components/schemas/EntityModificationAction'
        entity:
          $ref: '#/components/schemas/Person'
    EntityModificationAction:
      type: string
      description: Type of modification of an entity
      enum:
      - CREATE
      - UPDATE
      - DELETE
  securitySchemes:
    API Key:
      name: X-Api-Key
      type: apiKey
      in: header
tags:
  - name: Transaction
  - name: Capture
  - name: Refund
  - name: Cancel
  - name: Payment Method
  - name: Order
  - name: Transaction Certificate
  - name: Callbacks
    x-displayName: Callbacks events
    description: |
      ## taskModification callback
    
      Following request-body is send as POST request on the URL used to register the callback:
    
      <SchemaDefinition schemaRef="#/components/schemas/TaskModificationEvent" />
    
      ## personModification callback
    
      Following request-body is send as POST request on the URL used to register the callback:
    
      <SchemaDefinition schemaRef="#/components/schemas/PersonModificationEvent" />
