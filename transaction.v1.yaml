openapi: 3.0.0
info:
  title: Transaction API
  version: '1.0'
  description: |
    # Introduction
    Grab Link REST API is developed to provide standard interface for merchant to accept payment from website or app. As some API may contain sensitive data in request/response message, merchant need to ensure that their environment is complied with PCI DSS security standard requirements before using those API.

    Merchant may also consider to use Links Client Side SDK (Links JS) to reduce the scope of PCI DSS requirement through tokenisation of card data.

    # Idempotency
    Every API request from merchant to Grab Link may contain Idempotency-Key in the header (except for HTTP GET request), and used to identify subsequent retries of the same request, ie. if a request is sent with same Idempotency-Key with same details, eg. amount, payment method, etc, Grab Link will simply return previously completed response without performing any new action. Conversely, API request will return error If duplicate Idempotency-Key is sent with different details to prevent accidental usage.

    Idempotency-Key will be kept for 24 hours, and any request with the same Idempotency-Key beyond that time frame will be considered as a new request.

    # Encryption
    Other than raw PAN, merchant may encrypt the card data before sending through API. 

    Grab Link will provides iOS and Android SDK to support merchant app to perform encryption, as well as web SDK to support merchant website.

    Details can be found here: 0. Card number encryption via SDK

    # Webhook
    Merchant is able to set webhook endpoint for supported payment events on Grab Link Merchant Portal, and the result of any API request will be posted to this endpoint. This is especially necessary when the customer is redirected to another website (eg. in the case of 3D Secure Authentication).

    # Signature Hash
    Merchant need to calculate signature hash and include it in header, to ensure data integrity when consuming Grab Link API. Each merchant will be assigned with a secret key, and this key would be used when generating HMAC signature.

    ### Step to generate HMAC signature:
    1. Generate timestamp (unix timestamp)
    2. Concatenate request-body with timestamp in the following format:
    concatenated-string = {request-body} + ",t={timestamp}"
    3. Calculate HMAC using SHA512 hashing  
    signature-hash = hmac-sha512(concatenated-string, {secret-key})
    4. Set the hex string representation of the HMAC result to upper case, and use it as the signature hash in base64 encoding format.
    5. Include Timestamp to header
    6. Include Signature to header

    ### Sample
    #### Example of message to be signed
    > {"merchant_order_num":"LESTERCHAN-001","capture_after_hours":"0","route_indicator":"LinksMerchant","require_3ds":true,"payer":{"reference_id":"k11ir27iftfjescf4bhc18qpbdsv2dl7","name":"Lester Chan","email":"lester.chan@grab.com","phone":"+6598765432","billing_address":{"city":"Singapore","country":"Singapore","state":"Singapore","building_name":"Grab HQ","street":"Media Link","postal_code":"139305"},"shipping_address":{"city":"SG","country":"Singapore","state":"SG","building_name":"Marina One","street":"9 Straits View","postal_code":"018937"}},"statement_descriptor":"LINKS","cart":{"cart_total":"16.00","cart_tax":"3.00","cart_shipping_fee":"2.00","cart_items":[{"item_name":"lesterchan.net Square Sticker","item_quantity":1,"item_price":"6.00","item_image":"https://lesterchan.net/content/themes/lesterchan.net/img/avatars/100.jpg","item_option":"Transparent"},{"item_name":"lesterchan.net Rectangle Sticker","item_quantity":2,"item_price":"2.00","item_image":"https://lesterchan.net/content/themes/lesterchan/img/logos/logo-800x600.png","item_option":"Large"}],"cart_currency":"SGD","cart_discount":"0.00"},"hpp":{"return_url":"https://lesterchan.net/shop/success","cancel_url":"https://lesterchan.net/shop/cancellester.chan@grab.com","phone":"+6598765432","billing_address":{"city":"Singapore","country":"Singapore","state":"Singapore","building_name":"Grab HQ","street":"Media Link","postal_code":"139305"},"shipping_address":{"city":"SG","country":"Singapore","state":"SG","building_name":"Marina One","street":"9 Straits View","postal_code":"018937"}},"statement_descriptor":"LINKS","cart":{"cart_total":"16.00","cart_tax":"3.00","cart_shipping_fee":"2.00","cart_items":[{"item_name":"lesterchan.net Square Sticker","item_quantity":1,"item_price":"6.00","item_image":"https://lesterchan.net/content/themes/lesterchan.net/img/avatars/100.jpg","item_option":"Transparent"},{"item_name":"lesterchan.net Rectangle Sticker","item_quantity":2,"item_price":"2.00","item_image":"https://lesterchan.net/content/themes/lesterchan/img/logos/logo-800x600.png","item_option":"Large"}],"cart_currency":"SGD","cart_discount":"0.00"},"hpp":{"return_url":"https://lesterchan.net/shop/success","cancel_url":"https://lesterchan.net/shop/cancel","browser_info":{"ip":"127.0.0.1","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.85 Safari/537.36"}}}

    #### Signature Calculation 
    ```sh
    $body = ... // 'refer to the sample message above'
    $hash_secret = get_hash_secret() // 'example: 007d252f0d0e47f9965589b7f7d011ba'
    $timestamp = get_timestamp() // 'example: 1620978893'
    $concatenated_string = $body + ",t=" + $timestamp
    $signature = hmac_sha512($concatenated_string, $hash_secret) // '10ecc1da78c0bed907b2c42f518c482bbe501c758955858adcb4c353ac1675ccc0bd32a84bae3db62757bb46e676a8ca25c3b0104ff086325f7e8a5d8e52a0ed'
    $signature = upper_case($signature) // '10ECC1DA78C0BED907B2C42F518C482BBE501C758955858ADCB4C353AC1675CCC0BD32A84BAE3DB62757BB46E676A8CA25C3B0104FF086325F7E8A5D8E52A0ED'
    $signature = base64_encode($signature) // 'MTBFQ0MxREE3OEMwQkVEOTA3QjJDNDJGNTE4QzQ4MkJCRTUwMUM3NTg5NTU4NThBRENCNEMzNTNBQzE2NzVDQ0MwQkQzMkE4NEJBRTNEQjYyNzU3QkI0NkU2NzZBOENBMjVDM0IwMTA0RkYwODYzMjVGN0U4QTVEOEU1MkEwRUQ=''
    ```
  contact:
    email: a@b.c
    name: Links Engineering
servers:
  - url: localhost
paths:
  /v1/transaction:
    post:
      summary: Create Transaction
      operationId: post-transaction
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  trans_id:
                    type: string
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  merchant_order_num:
                    type: string
                  amount:
                    type: object
                    required:
                      - currency
                      - value
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  pos_data:
                    type: object
                    properties:
                      pos_id:
                        type: string
                  result:
                    type: object
                    required:
                      - code
                      - message
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
                  auth_code:
                    type: string
                  cvc_result:
                    type: string
                  avs_result:
                    type: string
                  acquirer_reference:
                    type: string
                  three_ds:
                    type: object
                    properties:
                      redirection_url:
                        type: string
                      sdk_auth_response:
                        type: string
                  payer:
                    type: object
                    required:
                      - reference_id
                    properties:
                      reference_id:
                        type: string
                  payment_method:
                    type: object
                    properties:
                      card:
                        type: object
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          category:
                            type: string
                          issuing_country:
                            type: string
                          issuing_bank:
                            type: string
                      token:
                        type: object
                        properties:
                          token_id:
                            type: string
                      card_present:
                        type: object
                        description: Mandatory for Card Present transaction
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          icc_data:
                            type: string
                            description: |-
                              Mandatory for chip and contactless transaction.

                              Base64 encoded format of ICC data as defined by EMV
                      fingerprint:
                        type: string
                  trans_status:
                    type: string
                  metadata:
                    type: string
                required:
                  - trans_id
                  - action_time
                  - merchant_action_id
                  - amount
                  - result
                  - payer
              examples:
                example:
                  value:
                    trans_id: string
                    action_time: string
                    merchant_action_id: string
                    merchant_order_num: string
                    amount:
                      currency: string
                      value: string
                    pos_data:
                      pos_id: string
                    result:
                      code: string
                      message: string
                      raw_message: string
                    auth_code: string
                    cvc_result: string
                    avs_result: string
                    acquirer_reference: string
                    three_ds:
                      redirection_url: string
                      sdk_auth_response: string
                    payer:
                      reference_id: string
                    payment_method:
                      card:
                        brand: string
                        first_6: string
                        last_4: string
                        funding_type: string
                        category: string
                        issuing_country: string
                        issuing_bank: string
                      token:
                        token_id: string
                      card_present:
                        brand: string
                        first_6: string
                        last_4: string
                        funding_type: string
                        icc_data: string
                      fingerprint: string
                    trans_status: string
                    metadata: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                  description: 'Unique transaction id assigned by merchant for each request. '
                merchant_order_num:
                  type: string
                  description: The value of this parameter can be used to refer a transaction to the particular order record in merchant's system.
                amount:
                  type: object
                  description: Transaction Amount to be authorised.
                  required:
                    - currency
                    - value
                  properties:
                    currency:
                      type: string
                    value:
                      type: string
                capture_after_hours:
                  type: string
                  description: |-
                    Value greater than 0 indicates delayed capture of the authorisation by x hours.

                    0 indicates immediate capture. Max numeric string is "720".

                    Authorisation will not be automatically captured if this parameter is empty or not set.
                route_indicator:
                  type: string
                  description: Used to define routing algorithm to be used in a transaction
                require_3ds:
                  type: boolean
                  description: 'This parameter indicates if you want to perform 3DS for a transaction or not. Allowed values: true or false. Default value is false.'
                three_ds:
                  type: object
                  description: Mandatory when require_3ds parameter is set.
                  properties:
                    return_url:
                      type: string
                    browser_info:
                      type: object
                      properties:
                        accept_header:
                          type: string
                        user_agent:
                          type: string
                        language:
                          type: string
                        color_depth:
                          type: string
                        screen_height:
                          type: string
                        screen_width:
                          type: string
                        java_enabled:
                          type: boolean
                        javascript_enabled:
                          type: boolean
                        timezone_offset:
                          type: string
                    account_info:
                      type: object
                      description: The account information is used to improve the chance for Frictionless 3DS2 Authentication.
                      properties:
                        account_age_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                        account_change_date:
                          type: string
                        account_change_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                        account_date:
                          type: string
                        account_password_change_date:
                          type: string
                        account_password_change_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                        account_purchase_count:
                          type: number
                        account_provisioning_attempts:
                          type: number
                        account_day_transactions:
                          type: number
                        account_year_transactions:
                          type: number
                        payment_account_age:
                          type: string
                        payment_account_age_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                            - '05'
                        ship_address_usage_date:
                          type: string
                        ship_address_usage_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                            - '03'
                            - '04'
                        ship_name_indicator:
                          type: string
                          enum:
                            - '01'
                            - '02'
                        suspicious_account_activity:
                          type: boolean
                    sdk_auth_request:
                      type: string
                      description: |-
                        Mandatory for Native App Based 3DS2 Authentication.

                        Packed form of all other properties from 3DS2 SDK. The value consists of App ID, SDK Trans ID, Encrypted Device Data, Ephemeral Public Key, SDK Ref Number, SDK Max Timeout, Message Version, Interface and UI Type Options,

                        Can be obtained from 3DS2 SDK.
                three_ds_data:
                  type: object
                  description: Merchant may perform 3DS authentication using third party MPI/3DS Server and include the result here.
                  properties:
                    xid:
                      type: string
                      description: To be used for 3D Secure v1 only
                    ds_trans_id:
                      type: string
                      description: To be used for 3D Secure v2 only
                    status:
                      type: string
                      enum:
                        - 'Y'
                        - 'N'
                        - A
                        - U
                    eci:
                      type: string
                    auth_value:
                      type: string
                    auth_algo:
                      type: string
                    version:
                      type: string
                payer:
                  type: object
                  required:
                    - reference_id
                  properties:
                    reference_id:
                      type: string
                      description: Unique customer identifier.
                    name:
                      type: string
                    email:
                      type: string
                    phone:
                      type: string
                    billing_address:
                      type: object
                      properties:
                        city:
                          type: string
                        country:
                          type: string
                        state:
                          type: string
                        building_name:
                          type: string
                        street:
                          type: string
                        postal_code:
                          type: string
                    shipping_address:
                      type: object
                      properties:
                        city:
                          type: string
                        country:
                          type: string
                        state:
                          type: string
                        building_name:
                          type: string
                        street:
                          type: string
                        postal_code:
                          type: string
                pos_data:
                  type: object
                  properties:
                    pos_id:
                      type: string
                    pos_entry_mode:
                      type: object
                      properties:
                        pan_entry:
                          type: string
                          enum:
                            - unknown
                            - manual
                            - magstripe
                            - chip
                            - contactless_chip
                            - contactless_magstripe
                            - fallback_magstripe
                        pin_entry:
                          type: string
                          enum:
                            - unknown
                            - enabled
                            - disabled
                            - error
                    pos_condition_code:
                      type: string
                      enum:
                        - attended
                        - unattended
                        - mail_order
                device_info:
                  type: object
                  properties:
                    app_version:
                      type: string
                    platform:
                      type: string
                    spec:
                      type: string
                    ip:
                      type: string
                    geo_location:
                      type: object
                      properties:
                        latitude:
                          type: string
                        longitude:
                          type: string
                payment_method:
                  type: object
                  properties:
                    card:
                      type: object
                      properties:
                        number:
                          type: string
                        expiry_month:
                          type: string
                        expiry_year:
                          type: string
                        cvc:
                          type: string
                        holder_name:
                          type: string
                        create_token:
                          type: boolean
                    token:
                      type: object
                      properties:
                        token_id:
                          type: string
                    card_present:
                      type: object
                      description: Mandatory for Card Present transaction
                      properties:
                        number:
                          type: string
                        expiry_month:
                          type: string
                        expiry_year:
                          type: string
                        cvc:
                          type: string
                        sequence_num:
                          type: string
                        icc_data:
                          type: string
                          description: |-
                            Mandatory for chip and contactless transaction.

                            Base64 encoded format of ICC data as defined by EMV
                        track2_data:
                          type: string
                        pin_block:
                          type: string
                        pin_format:
                          type: string
                        pin_key_id:
                          type: string
                statement_descriptor:
                  type: string
                sub_merchant:
                  type: object
                  properties:
                    id:
                      type: string
                    name:
                      type: string
                    city:
                      type: string
                    country:
                      type: string
                    state:
                      type: string
                    street:
                      type: string
                    postal_code:
                      type: string
                    mcc:
                      type: string
                metadata:
                  type: string
              required:
                - merchant_action_id
                - amount
                - payer
            examples:
              example:
                value:
                  merchant_action_id: string
                  merchant_order_num: string
                  amount:
                    currency: string
                    value: string
                  capture_after_hours: string
                  route_indicator: string
                  require_3ds: true
                  three_ds:
                    return_url: string
                    browser_info:
                      accept_header: string
                      user_agent: string
                      language: string
                      color_depth: string
                      screen_height: string
                      screen_width: string
                      java_enabled: true
                      javascript_enabled: true
                      timezone_offset: string
                    account_info:
                      account_age_indicator: '01'
                      account_change_date: string
                      account_change_indicator: '01'
                      account_date: string
                      account_password_change_date: string
                      account_password_change_indicator: '01'
                      account_purchase_count: 0
                      account_provisioning_attempts: 0
                      account_day_transactions: 0
                      account_year_transactions: 0
                      payment_account_age: string
                      payment_account_age_indicator: '01'
                      ship_address_usage_date: string
                      ship_address_usage_indicator: '01'
                      ship_name_indicator: '01'
                      suspicious_account_activity: true
                    sdk_auth_request: string
                  three_ds_data:
                    xid: string
                    ds_trans_id: string
                    status: 'Y'
                    eci: string
                    auth_value: string
                    auth_algo: string
                    version: string
                  payer:
                    reference_id: string
                    name: string
                    email: string
                    phone: string
                    billing_address:
                      city: string
                      country: string
                      state: string
                      building_name: string
                      street: string
                      postal_code: string
                    shipping_address:
                      city: string
                      country: string
                      state: string
                      building_name: string
                      street: string
                      postal_code: string
                  pos_data:
                    pos_id: string
                    pos_entry_mode:
                      pan_entry: unknown
                      pin_entry: unknown
                    pos_condition_code: attended
                  device_info:
                    app_version: string
                    platform: string
                    spec: string
                    ip: string
                    geo_location:
                      latitude: string
                      longitude: string
                  payment_method:
                    card:
                      number: string
                      expiry_month: string
                      expiry_year: string
                      cvc: string
                      holder_name: string
                      create_token: true
                    token:
                      token_id: string
                    card_present:
                      number: string
                      expiry_month: string
                      expiry_year: string
                      cvc: string
                      sequence_num: string
                      icc_data: string
                      track2_data: string
                      pin_block: string
                      pin_format: string
                      pin_key_id: string
                  statement_descriptor: string
                  sub_merchant:
                    id: string
                    name: string
                    city: string
                    country: string
                    state: string
                    street: string
                    postal_code: string
                    mcc: string
                  metadata: string
        description: Create Transaction
      description: Create Transaction
      parameters:
        - schema:
            type: string
            description: application/json
            minLength: 1
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            minLength: 1
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            minLength: 1
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            minLength: 0
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            minLength: 0
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Transaction
      security: []
    parameters: []
  '/v1/transaction/{trans_id}':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    get:
      summary: Retrieve Transaction
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  trans_id:
                    type: string
                  merchant_order_num:
                    type: string
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  pos_data:
                    type: object
                    properties:
                      pos_id:
                        type: string
                  auth_code:
                    type: string
                  cvc_result:
                    type: string
                  avs_result:
                    type: string
                  acquirer_reference:
                    type: string
                  payer:
                    type: object
                    properties:
                      reference_id:
                        type: string
                    required:
                      - reference_id
                  payment_method:
                    type: object
                    properties:
                      card:
                        type: object
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          category:
                            type: string
                          issuing_country:
                            type: string
                          issuing_bank:
                            type: string
                      token:
                        type: object
                        properties:
                          token_id:
                            type: string
                      card_present:
                        type: object
                        description: Mandatory for Card Present transaction
                        properties:
                          brand:
                            type: string
                          first_6:
                            type: string
                          last_4:
                            type: string
                          funding_type:
                            type: string
                          icc_data:
                            type: string
                            description: |-
                              Mandatory for chip and contactless transaction.

                              Base64 encoded format of ICC data as defined by EMV
                      fingerprint:
                        type: string
                  trans_status:
                    type: string
                  metadata:
                    type: string
                  trans_logs:
                    type: array
                    items:
                      type: object
                      properties:
                        action_type:
                          type: string
                          description: authorize/capture/refund/cancel
                        action_time:
                          type: string
                        merchant_action_id:
                          type: string
                        initiating_reason:
                          type: string
                        amount:
                          type: object
                          properties:
                            currency:
                              type: string
                            value:
                              type: string
                        result:
                          type: object
                          properties:
                            code:
                              type: string
                            message:
                              type: string
                            raw_message:
                              type: string
              examples:
                example:
                  value:
                    trans_id: string
                    merchant_order_num: string
                    amount:
                      currency: string
                      value: string
                    pos_data:
                      pos_id: string
                    auth_code: string
                    cvc_result: string
                    avs_result: string
                    acquirer_reference: string
                    payer:
                      reference_id: string
                    payment_method:
                      card:
                        brand: string
                        first_6: string
                        last_4: string
                        funding_type: string
                        category: string
                        issuing_country: string
                        issuing_bank: string
                      token:
                        token_id: string
                      card_present:
                        brand: string
                        first_6: string
                        last_4: string
                        funding_type: string
                        icc_data: string
                      fingerprint: string
                    trans_status: string
                    metadata: string
                    trans_logs:
                      - action_type: string
                        action_time: string
                        merchant_action_id: string
                        initiating_reason: string
                        amount:
                          currency: string
                          value: string
                        result:
                          code: string
                          message: string
                          raw_message: string
      operationId: get-transaction-id
      parameters:
        - schema:
            type: string
            format: uuid
          in: header
          name: X-Request-ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      description: Retrieve Transaction
      tags:
        - Transaction
      security: []
  '/v1/transaction/{trans_id}/capture':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    post:
      summary: Capture
      operationId: post-transaction-trans_id-capture
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  pos_data:
                    type: object
                    properties:
                      pos_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
              examples:
                example:
                  value:
                    action_time: string
                    merchant_action_id: string
                    amount:
                      currency: string
                      value: string
                    pos_data:
                      pos_id: string
                    result:
                      code: string
                      message: string
                      raw_message: string
      description: Capture
      parameters:
        - schema:
            type: string
            description: application/json
            minLength: 1
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            minLength: 1
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            minLength: 1
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            minLength: 0
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            minLength: 0
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Capture
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                amount:
                  type: object
                  properties:
                    currency:
                      type: string
                    value:
                      type: string
                pos_data:
                  type: object
                  properties:
                    pos_id:
                      type: string
            examples:
              example:
                value:
                  merchant_action_id: string
                  amount:
                    currency: string
                    value: string
                  pos_data:
                    pos_id: string
        description: Capture
      security: []
  '/v1/transaction/{trans_id}/refund':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    post:
      summary: Refund
      operationId: post-transaction-trans_id-refund
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  pos_data:
                    type: object
                    properties:
                      pos_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
              examples:
                example:
                  value:
                    action_time: string
                    merchant_action_id: string
                    amount:
                      currency: string
                      value: string
                    pos_data:
                      pos_id: string
                    result:
                      code: string
                      message: string
                      raw_message: string
      description: Refund
      parameters:
        - schema:
            type: string
            description: application/json
            minLength: 1
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            minLength: 1
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            minLength: 1
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            minLength: 0
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            minLength: 0
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Refund
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                initiating_reason:
                  type: string
                amount:
                  type: object
                  properties:
                    currency:
                      type: string
                    value:
                      type: string
                pos_data:
                  type: object
                  properties:
                    pos_id:
                      type: string
            examples:
              example:
                value:
                  merchant_action_id: string
                  initiating_reason: string
                  amount:
                    currency: string
                    value: string
                  pos_data:
                    pos_id: string
        description: Refund
      security: []
  '/v1/transaction/{trans_id}/cancel':
    parameters:
      - schema:
          type: string
        name: trans_id
        in: path
        required: true
        description: GL Transaction ID from Authorization Response
    post:
      summary: Cancel
      operationId: post-transaction-trans_id-cancel
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  action_time:
                    type: string
                  merchant_action_id:
                    type: string
                  amount:
                    type: object
                    properties:
                      currency:
                        type: string
                      value:
                        type: string
                  pos_data:
                    type: object
                    properties:
                      pos_id:
                        type: string
                  result:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      raw_message:
                        type: string
              examples:
                example:
                  value:
                    action_time: string
                    merchant_action_id: string
                    amount:
                      currency: string
                      value: string
                    pos_data:
                      pos_id: string
                    result:
                      code: string
                      message: string
                      raw_message: string
      description: Cancel
      parameters:
        - schema:
            type: string
            description: application/json
            minLength: 1
            maxLength: 32
          in: header
          name: Content-Type
          required: true
          description: application/json
        - schema:
            type: string
            description: HMAC-SHA512
            minLength: 1
            maxLength: 256
          in: header
          name: Signature
          required: true
          description: HMAC-SHA512
        - schema:
            type: string
            description: UNIX Timestamp
            minLength: 1
            maxLength: 16
          in: header
          name: Timestamp
          required: true
          description: Unix Timestamp
        - schema:
            type: string
            minLength: 0
            maxLength: 64
          in: header
          name: Idempotency-Key
          description: Unique value generated by the merchant used to identify subsequent retries of the same request as long as other details remain the same.
        - schema:
            type: string
            format: uuid
            minLength: 0
            maxLength: 64
          in: header
          name: X-Request-ID
          description: Unique Message ID
        - schema:
            type: string
            minLength: 1
            maxLength: 256
          in: header
          name: X-Api-Key
          description: API Key
          required: true
      tags:
        - Cancel
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_action_id:
                  type: string
                initiating_reason:
                  type: string
                pos_data:
                  type: object
                  properties:
                    pos_id:
                      type: string
            examples:
              example:
                value:
                  merchant_action_id: string
                  initiating_reason: string
                  pos_data:
                    pos_id: string
        description: Cancel
      security: []
components:
  schemas: {}
  securitySchemes:
    API Key:
      type: apiKey
      in: header
      description: |-
        Merchant would be assigned with API Key that would be required when consuming Grab Link API.

        There are 2 types of API Key: Private API Key and Public API Key.

        Most of Grab Link APIs are designed for server to server connection, therefore Private API Key should be used, kept private and not exposed to front end components such as website or app.

        Public API Key is used to call certain Grab Link API from front end, such as to obtain single-use token from merchant hosted payment page to be used in the subsequent transaction that follows.
      name: X-Api-Key
tags:
  - name: Transaction
  - name: Capture
  - name: Cancel
  - name: Refund
security:
  - API Key: []
